### HashMap

<hr>



1、HashMap初始化桶的大小？

32位电脑：8

64位电脑：16

邻接列表



JDK1.8及以上三个重要参数：

16：默认桶数量

负载因子：默认0.75（比如默认超过16*0.75就会扩容）

+ 老版本，当一个桶的数量超过16*0.75，扩容一倍，32
+ 新版本，HashMap达到桶长度的时候，扩容负载因子倍，28

8：超过8变红黑树



2、HashMap的查找效率一定比ArrayList查找效率高吗？

（1）在存储两个值的时候，ArrayList高

因为，要先根据哈希值算法计算，判断在哪一个类，然后挨个比较，数组会直接比较

（2）在存放的内容Hash值一样时，且长度不超过8个（超过8变红黑树，性能变好了）

（3）高并发同时的写入（扩容，转红黑树及其耗性能）



扩容是最影响HashMap效率的，需要重新计算哈希值，并全部重新排列，要根据场景，预估数据量，然后赋初始值



JDK1.8，单个桶后长度达到8的时候，将链表转为红黑树



HashMap中存1000个数，应该初始化多少？

最小1024，最大2048，便于计算机计算



<=8 冒泡

\> 40 快排

8-40 根据实际情况选择排序算法



```java
String a = "";
String b = new String("abc");
String c = new String();
HashMap map = new HashMap<>(16);
map.put(a,new Object());
map.put(b,new Object());
map.put(c,new Object());
map.put("A",new Object());
//问这几个哪一个性能最好，哪一个性能最差
//b性能最好，"A"和a性能一样，c性能最差
//原因：
//new String("abc")初始化赋值并同时会直接算一个哈希值
//new String()不初始化，会先赋值"",而且不会给哈希值，当put的时候才算哈希值，所以性能最差
//map.put("A",new Object())和map.put(a,new Object())都是放进去的时候从常量池取值然后算哈希值
```

